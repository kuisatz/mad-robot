<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_07) on Wed Jan 16 17:37:23 EST 2013 -->
<title>DirectoryWalker</title>
<meta name="date" content="2013-01-16">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DirectoryWalker";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DirectoryWalker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/madrobot/io/file/filters/DirectoryFileFilter.html" title="class in com.madrobot.io.file.filters"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/madrobot/io/file/filters/DirectoryWalker.html" target="_top">Frames</a></li>
<li><a href="DirectoryWalker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods_inherited_from_class_java.lang.Object">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.madrobot.io.file.filters</div>
<h2 title="Class DirectoryWalker" class="title">Class DirectoryWalker&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.madrobot.io.file.filters.DirectoryWalker&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public abstract class <span class="strong">DirectoryWalker&lt;T&gt;</span>
extends <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Abstract class that walks through a directory hierarchy and provides
 subclasses with convenient hooks to add specific behaviour.
 <p>
 This class operates with a <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/io/FileFilter.html?is-external=true" title="class or interface in java.io"><code>FileFilter</code></a> and maximum depth to limit the
 files and direcories visited. Commons IO supplies many common filter
 implementations in the <a href="filefilter/package-summary.html">
 filefilter</a> package.
 <p>
 The following sections describe:
 <ul>
 <li><a href="#example">1. Example Implementation</a> - example
 <code>FileCleaner</code> implementation.</li>
 <li><a href="#filter">2. Filter Example</a> - using <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/io/FileFilter.html?is-external=true" title="class or interface in java.io"><code>FileFilter</code></a>(s)
 with <code>DirectoryWalker</code>.</li>
 <li><a href="#cancel">3. Cancellation</a> - how to implement cancellation
 behaviour.</li>
 </ul>
 
 <a name="example"></a>
 <h3>1. Example Implementation</h3>
 
 There are many possible extensions, for example, to delete all files and
 '.svn' directories, and return a list of deleted files:
 
 <pre>
 public class FileCleaner extends DirectoryWalker {
 
        public FileCleaner() {
                super();
        }
 
        public List clean(File startDirectory) {
                List results = new ArrayList();
                walk(startDirectory, results);
                return results;
        }
 
        protected boolean handleDirectory(File directory, int depth,
                        Collection results) {
                // delete svn directories and then skip
                if (&quot;.svn&quot;.equals(directory.getName())) {
                        directory.delete();
                        return false;
                } else {
                        return true;
                }
 
        }
 
        protected void handleFile(File file, int depth, Collection results) {
                // delete file and add to list of deleted
                file.delete();
                results.add(file);
        }
 }
 </pre>
 
 <a name="filter"></a>
 <h3>2. Filter Example</h3>
 
 Choosing which directories and files to process can be a key aspect of using
 this class. This information can be setup in three ways, via three different
 constructors.
 <p>
 The first option is to visit all directories and files. This is achieved via
 the no-args constructor.
 <p>
 The second constructor option is to supply a single <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/io/FileFilter.html?is-external=true" title="class or interface in java.io"><code>FileFilter</code></a> that
 describes the files and directories to visit. Care must be taken with this
 option as the same filter is used for both directories and files.
 <p>
 For example, if you wanted all directories which are not hidden and files
 which end in ".txt":
 
 <pre>
 public class FooDirectoryWalker extends DirectoryWalker {
        public FooDirectoryWalker(FileFilter filter) {
                super(filter, -1);
        }
 }
 
 // Build up the filters and create the walker
 // Create a filter for Non-hidden directories
 IOFileFilter fooDirFilter = FileFilterUtils.andFileFilter(
                FileFilterUtils.directoryFileFilter, HiddenFileFilter.VISIBLE);
 
 // Create a filter for Files ending in &quot;.txt&quot;
 IOFileFilter fooFileFilter = FileFilterUtils.andFileFilter(
                FileFilterUtils.fileFileFilter,
                FileFilterUtils.suffixFileFilter(&quot;.txt&quot;));
 
 // Combine the directory and file filters using an OR condition
 java.io.FileFilter fooFilter = FileFilterUtils.orFileFilter(fooDirFilter,
                fooFileFilter);
 
 // Use the filter to construct a DirectoryWalker implementation
 FooDirectoryWalker walker = new FooDirectoryWalker(fooFilter);
 </pre>
 <p>
 The third constructor option is to specify separate filters, one for
 directories and one for files. These are combined internally to form the
 correct <code>FileFilter</code>, something which is very easy to get wrong
 when attempted manually, particularly when trying to express constructs like
 'any file in directories named docs'.
 <p>
 For example, if you wanted all directories which are not hidden and files
 which end in ".txt":
 
 <pre>
  public class FooDirectoryWalker extends DirectoryWalker {
    public FooDirectoryWalker(IOFileFilter dirFilter, IOFileFilter fileFilter) {
      super(dirFilter, fileFilter, -1);
    }
  }
  
  // Use the filters to construct the walker
  FooDirectoryWalker walker = new FooDirectoryWalker(
    HiddenFileFilter.VISIBLE,
    FileFilterUtils.suffixFileFilter(".txt"),
  );
 </pre>
 
 This is much simpler than the previous example, and is why it is the
 preferred option for filtering.
 
 <a name="cancel"></a>
 <h3>3. Cancellation</h3>
 
 The DirectoryWalker contains some of the logic required for cancel
 processing. Subclasses must complete the implementation.
 <p>
 What <code>DirectoryWalker</code> does provide for cancellation is:
 <ul>
 <li><a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters"><code>DirectoryWalker.CancelException</code></a> which can be thrown in any of the
 <i>lifecycle</i> methods to stop processing.</li>
 <li>The <code>walk()</code> method traps thrown <a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters"><code>DirectoryWalker.CancelException</code></a> and
 calls the <code>handleCancelled()</code> method, providing a place for custom
 cancel processing.</li>
 </ul>
 <p>
 Implementations need to provide:
 <ul>
 <li>The decision logic on whether to cancel processing or not.</li>
 <li>Constructing and throwing a <a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters"><code>DirectoryWalker.CancelException</code></a>.</li>
 <li>Custom cancel processing in the <code>handleCancelled()</code> method.
 </ul>
 <p>
 Two possible scenarios are envisaged for cancellation:
 <ul>
 <li><a href="#external">3.1 External / Mult-threaded</a> - cancellation being
 decided/initiated by an external process.</li>
 <li><a href="#internal">3.2 Internal</a> - cancellation being
 decided/initiated from within a DirectoryWalker implementation.</li>
 </ul>
 <p>
 The following sections provide example implementations for these two
 different scenarios.
 
 <a name="external"></a>
 <h4>3.1 External / Multi-threaded</h4>
 
 This example provides a public <code>cancel()</code> method that can be
 called by another thread to stop the processing. A typical example use-case
 would be a cancel button on a GUI. Calling this method sets a <a href=
 "http://java.sun.com/docs/books/jls/second_edition/html/classes.doc.html#36930"
 > volatile</a> flag to ensure it will work properly in a multi-threaded
 environment. The flag is returned by the <code>handleIsCancelled()</code>
 method, which will cause the walk to stop immediately. The
 <code>handleCancelled()</code> method will be the next, and last, callback
 method received once cancellation has occurred.
 
 <pre>
 public class FooDirectoryWalker extends DirectoryWalker {
 
        private volatile boolean cancelled = false;
 
        public void cancel() {
                cancelled = true;
        }
 
        private void handleIsCancelled(File file, int depth, Collection results) {
                return cancelled;
        }
 
        protected void handleCancelled(File startDirectory, Collection results,
                        CancelException cancel) {
                // implement processing required when a cancellation occurs
        }
 }
 </pre>
 
 <a name="internal"></a>
 <h4>3.2 Internal</h4>
 
 This shows an example of how internal cancellation processing could be
 implemented. <b>Note</b> the decision logic and throwing a
 <a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters"><code>DirectoryWalker.CancelException</code></a> could be implemented in any of the <i>lifecycle</i>
 methods.
 
 <pre>
 public class BarDirectoryWalker extends DirectoryWalker {
 
        protected boolean handleDirectory(File directory, int depth,
                        Collection results) throws IOException {
                // cancel if hidden directory
                if (directory.isHidden()) {
                        throw new CancelException(file, depth);
                }
                return true;
        }
 
        protected void handleFile(File file, int depth, Collection results)
                        throws IOException {
                // cancel if read-only file
                if (!file.canWrite()) {
                        throw new CancelException(file, depth);
                }
                results.add(file);
        }
 
        protected void handleCancelled(File startDirectory, Collection results,
                        CancelException cancel) {
                // implement processing required when a cancellation occurs
        }
 }
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters">DirectoryWalker.CancelException</a></strong></code>
<div class="block">CancelException is thrown in DirectoryWalker to cancel the current
 processing.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="file:/C:/Elton Worskpace/AndroidSDK_20/docs/reference/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DirectoryWalker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/madrobot/io/file/filters/DirectoryFileFilter.html" title="class in com.madrobot.io.file.filters"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../com/madrobot/io/file/filters/DirectoryWalker.CancelException.html" title="class in com.madrobot.io.file.filters"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/madrobot/io/file/filters/DirectoryWalker.html" target="_top">Frames</a></li>
<li><a href="DirectoryWalker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods_inherited_from_class_java.lang.Object">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
